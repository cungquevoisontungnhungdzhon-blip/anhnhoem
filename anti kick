-- üîí Anti-Kick m·∫°nh nh·∫•t c√≥ th·ªÉ (Client-side)
-- C·∫ßn executor h·ªó tr·ª£ hookmetamethod / getrawmetatable

local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer

local function protect()
    local mt = getrawmetatable(game)
    local old = mt.__namecall
    local oldIndex = mt.__index

    setreadonly(mt, false)

    -- Hook __namecall (Kick, Destroy, Remove, BreakJoints, ClearAllChildren...)
    mt.__namecall = newcclosure(function(self, ...)
        local method = getnamecallmethod()
        if not method then return old(self, ...) end
        method = method:lower()

        if method == "kick" then
            warn("‚ùå Blocked Kick on", tostring(self))
            return nil
        end
        if method == "destroy" or method == "remove" then
            if self == LocalPlayer or self == LocalPlayer.Character then
                warn("‚ùå Blocked Destroy/Remove on", tostring(self))
                return nil
            end
        end
        if method == "breakjoints" and self == LocalPlayer.Character then
            warn("‚ùå Blocked BreakJoints on Character")
            return nil
        end
        if method == "clearallchildren" and self == game then
            warn("‚ùå Blocked ClearAllChildren")
            return nil
        end
        if method == "destroydescendants" and self == game then
            warn("‚ùå Blocked DestroyDescendants")
            return nil
        end
        if method == "error" or method == "preloadasync" or method == "shutdown" then
            warn("‚ùå Blocked suspicious call:", method)
            return nil
        end

        return old(self, ...)
    end)

    -- Hook __index ƒë·ªÉ ch·∫∑n Player.Kick tr·ª±c ti·∫øp
    mt.__index = newcclosure(function(self, key)
        if self == LocalPlayer and tostring(key):lower() == "kick" then
            warn("‚ùå Attempt to index Kick blocked")
            return function() return nil end
        end
        return oldIndex(self, key)
    end)

    setreadonly(mt, true)
    print("‚úÖ Anti-Kick (max protection) loaded")
end

protect()
